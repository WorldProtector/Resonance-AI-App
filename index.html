<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Bio-Cycle Plate: Dynamic Meal Planner</title><script src="https://cdn.tailwindcss.com"></script><style>body{font-family:'Inter',sans-serif}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:#fbbf24;border-radius:2px}::-webkit-scrollbar-track{background:#1a1a2e}#app{max-width:32rem}.result-box{max-height:350px;overflow-y:auto;}</style></head><body class="bg-[#1a1a2e] text-gray-100 min-h-screen flex items-center justify-center p-4"><div id="app" class="w-full bg-[#2c2c4a] rounded-xl shadow-2xl p-6 md:p-8 space-y-6"><h1 class="text-3xl font-extrabold text-[#fcd34d] text-center mb-6">Bio-Cycle Plate</h1><p class="text-center text-sm text-gray-400 mb-8">Dynamic, whole-food meal planning for energetic alignment. ($7.99/mo)</p><div id="status-message" class="text-center p-2 rounded-lg text-sm transition duration-300 hidden"></div><div class="space-y-2"><label for="goal-select" class="text-sm font-medium text-gray-300">Today's Energetic Goal</label><select id="goal-select" class="w-full p-3 bg-[#3a3a5e] border border-transparent focus:border-[#fcd34d] rounded-lg text-gray-100 appearance-none focus:ring-1 focus:ring-[#fcd34d] transition duration-200"><option value="Sustained Focus">Sustained Focus & Cognitive Flow</option><option value="Deep Sleep">Evening Deep Sleep & Nervous System Reset</option><option value="Physical Recovery">Post-Activity Recovery & Repair</option><option value="Gentle Detox">Gentle Detoxification & Digestive Support</option></select></div><div class="space-y-2"><label for="diet-input" class="text-sm font-medium text-gray-300">Dietary Preferences / Restrictions (Optional)</label><input id="diet-input" type="text" class="w-full p-3 bg-[#3a3a5e] border border-transparent focus:border-[#fcd34d] rounded-lg text-gray-100 placeholder-gray-500 focus:ring-1 focus:ring-[#fcd34d] transition duration-200" placeholder="e.g., 'Vegetarian,' 'No Gluten,' 'Keto-friendly'"></div><button id="generate-button" onclick="generatePlan()" class="w-full py-3 px-4 bg-[#fcd34d] hover:bg-[#fbbf24] text-gray-900 font-bold rounded-lg shadow-lg transition duration-200 focus:outline-none focus:ring-4 focus:ring-[#fcd34d] focus:ring-opacity-50 disabled:opacity-50" disabled>Generate Dynamic Plate Plan</button><div class="space-y-2 pt-4"><label class="text-sm font-medium text-gray-300">Holistic Meal Plan Blueprint</label><div id="plan-output" class="result-box w-full p-3 bg-[#3a3a5e] rounded-lg text-gray-100 placeholder-gray-500 opacity-80 min-h-[150px] whitespace-pre-wrap">Your whole-food, naturally optimized plan will appear here...</div></div></div><script type="module">import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";window.generateButton = document.getElementById('generate-button');window.statusMessage = document.getElementById('status-message');try {const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');if (Object.keys(firebaseConfig).length === 0) { throw new Error("Missing config."); }const app = initializeApp(firebaseConfig);window.db = getFirestore(app);window.auth = getAuth(app);if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {signInWithCustomToken(window.auth, __initial_auth_token).then(() => {window.generateButton.disabled = false;window.statusMessage.className = "text-center p-2 rounded-lg text-sm bg-green-900 text-green-200 block";window.statusMessage.textContent = "System Ready: Secure session active.";}).catch(error => {signInAnonymously(window.auth).then(() => {window.generateButton.disabled = false;}).catch(err => {throw new Error("Auth Failed.");});});} else {signInAnonymously(window.auth).then(() => {window.generateButton.disabled = false;}).catch(error => {throw new Error("Auth Failed.");});}} catch (e) {const errorDetail = e.message.includes('Missing config') ? "Configuration data is missing. Persistence disabled." : "Authentication/Config error.";window.statusMessage.className = "text-center p-2 rounded-lg text-sm bg-red-900 text-red-200 block";window.statusMessage.textContent = `Error: Firebase setup failed. (${errorDetail}) **Proceeding with main functionality.**`;window.generateButton.disabled = false;}</script><script>async function fetchWithRetry(url, options, maxRetries = 3) {for (let i = 0; i < maxRetries; i++) {try {const response = await fetch(url, options);if (response.ok) return response;throw new Error(`HTTP error! status: ${response.status}`);} catch (error) {if (i === maxRetries - 1) throw error;const delay = Math.pow(2, i) * 1000;await new Promise(resolve => setTimeout(resolve, delay));}}}window.generatePlan = async function() {const goal = document.getElementById('goal-select').value;const diet = document.getElementById('diet-input').value.trim();const outputDiv = document.getElementById('plan-output');if (!goal) {outputDiv.textContent = "Please select a goal.";return;}window.generateButton.disabled = true;window.generateButton.textContent = 'Generating Blueprint...';outputDiv.textContent = 'Consulting the natural nutrient cycles...';const systemPrompt = `You are the Bio-Cycle Plate Architect. Your role is to generate a holistic, whole-food, naturally sourced meal plan (Breakfast, Lunch, Dinner) optimized for the user's specific energetic goal.Focus only on natural, unrefined, and seasonal ingredients. DO NOT include supplements or processed foods. Ensure the nutrient sequencing supports the goal throughout the day.`;const userQuery = `Create a 3-meal plan (Breakfast, Lunch, Dinner) optimized for the goal: "${goal}". Dietary notes: "${diet || 'None'}"`;const payload = {contents: [{ parts: [{ text: userQuery }] }],tools: [{ "google_search": {} }],systemInstruction: {parts: [{ text: systemPrompt }]}};const apiKey = "";const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;try {const response = await fetchWithRetry(apiUrl, {method: 'POST',headers: { 'Content-Type': 'application/json' },body: JSON.stringify(payload)});const result = await response.json();const plan = result.candidates?.[0]?.content?.parts?.[0]?.text || "Error: Failed to generate meal plan. Please try again.";outputDiv.textContent = plan;window.statusMessage.className = "text-center p-2 rounded-lg text-sm bg-amber-900 text-amber-200 block";window.statusMessage.textContent = `Blueprint Ready! Your plan is optimized for ${goal}.`;} catch (error) {console.error("Gemini API Error:", error);outputDiv.textContent = "An error occurred during plan generation. Check console for details.";window.statusMessage.className = "text-center p-2 rounded-lg text-sm bg-red-900 text-red-200 block";window.statusMessage.textContent = "Plan Generation Failed.";} finally {window.generateButton.disabled = false;window.generateButton.textContent = 'Generate Dynamic Plate Plan';}};</script></body></html>
